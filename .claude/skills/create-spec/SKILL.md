---
name: create-spec
description: Create a spec document for a change or improvement in Logic Factory following the Spec-Driven Development protocol
argument-hint: [change-id]
disable-model-invocation: true
---

# Create Spec Document

Spec-Driven Development プロトコルに従って、改修・変更の設計書を作成します。

**対象**: 機能追加、バグ修正、改善、リファクタリングなど、あらゆる規模の変更に対応します。

## 実行プロセス

### 1. 設計書情報の確認

まず、以下の情報をユーザーから収集します（引数で指定されていない場合）:

- **変更ID**: `$ARGUMENTS` が指定されている場合はそれを使用、なければ質問する（例: `add-error-retry`, `fix-n8n-timeout`）
- **変更の目的**: どのような問題を解決し、どのような価値を提供するか

### 2. ディレクトリ構造の確認

設計書を配置します:

**既存プロジェクトへの変更の場合:**

```bash
docs/
└── 03_specs/
    └── {change-id}.md
```

必要なディレクトリが存在しない場合は作成します。

### 3. 設計書の生成

必要な情報をもとに設計書を作成します。

不明点はAskUserQuestionToolを使用してユーザーに質問し、情報を補完します。

## 重要な注意事項

- **対話的なアプローチ**: ユーザーから十分な情報を引き出すため、必要に応じて質問する
- **テンプレートの柔軟性**: 変更の性質に応じて、不要なセクションは省略可能
- **既存ファイルの確認**: ディレクトリやファイルが既に存在する場合は上書き確認を行う
- **Git 管理**: 作成後、ユーザーに git add を推奨する
- **小さく始める**: 小規模な変更は簡潔に記述し、必要に応じて後から詳細化する

## ヒアリング項目

変更の規模に応じて、以下の情報を収集します:

### 共通項目（すべての変更）

1. **変更ID**: ケバブケース（例: `add-error-retry`, `fix-timeout-issue`）
2. **対象プロジェクト**: 既存プロジェクト名または新規プロジェクト名（ケバブケース）
3. **変更の目的**: 何を解決するのか、どのような価値を提供するのか
4. **影響範囲**: どのコンポーネントに影響するか（Python / インフラなど）

### 小規模な変更の場合（追加項目）

5. **変更内容**: 具体的に何を変更するのか
6. **テスト方法**: どのように動作確認するか

### 新規プロジェクトの場合（追加項目）

5. **入力データ**: どこから何を取得するのか
6. **出力データ**: どこに何を出力するのか
7. **主要なロジック**: どのような処理を行うのか
